<!DOCTYPE html>
<html>
<head>
  <title>WFH Login</title>
</head>
<body>
  <h2>Login</h2>

  <input id="email" placeholder="Email"><br><br>
  <input id="password" type="password" placeholder="Password"><br><br>
  <button onclick="login()">Login</button>

  <p id="error" style="color:red;"></p>

  <!-- JS -->
  <script src="api.js"></script>
  <script>
    async function login() {
      const email = email.value;
      const password = password.value;

      const res = await apiPost("login", { email, password });

      if (res.error) {
        error.innerText = res.error;
        return;
      }

      localStorage.setItem("token", res.token);
      localStorage.setItem("role", res.role);

      if (res.mustReset) {
        location.href = "reset.html";
      } else {
        location.href = "dashboard.html";
      }
    }
  </script>
</body>
</html>
